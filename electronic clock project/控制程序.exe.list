EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
控制程序.exe -- emu8086 assembler version: 4.08  
 
[ 2020/5/17  --  12:26:41 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       SET_INT MACRO X,Y
[   2]        :                                       ;设置中断向量
[   3]        :                                       MOV AX,0
[   4]        :                                       MOV ES,AX ;将中断向量段地址设为0，那偏移地址和段地址就好用公式了
[   5]        :                                       MOV BX,4*X    ;BX=
[   6]        :                                       MOV ES:WORD PTR[BX],OFFSET Y;中断程序的偏移地址送入对应地方
[   7]        :                                       MOV ES:WORD PTR[BX+2],SEG Y ;中断程序送入段地址
[   8]        :                                       ENDM
[   9]        :                                       
[  10]        :                                       
[  11]        :                                       ;用来处理显示
[  12]        :                                       INT_PRO MACRO X,NUM,Y,Z
[  13]        :                                       LOCAL AA
[  14]        :                                       XOR BX,BX
[  15]        :                                       MOV AX,BX
[  16]        :                                       MOV AL,X
[  17]        :                                       CMP AL,NUM  ;比较秒计数到60或24了吗？
[  18]        :                                       JNE AA
[  19]        :                                       INC Y   ;是，则分钟/小时加一
[  20]        :                                       MOV AL,0   ;复位秒
[  21]        :                                       MOV X,AL
[  22]        :                                       AA:
[  23]        :                                       MOV BL,10
[  24]        :                                       DIV BL
[  25]        :                                       MOV BL,AL
[  26]        :                                       MOV AL,TABLE[BX]       ;转换时/分/秒 的高位
[  27]        :                                       MOV Z,AL
[  28]        :                                       MOV BL,AH   ;转换得到对应的低位
[  29]        :                                       MOV AL,TABLE[BX]
[  30]        :                                       MOV Z+1,AL
[  31]        :                                       ENDM
[  32]        :                                       
[  33]        :                                       
[  34]        :                                       
[  35]        :                                       
[  36]        :                                       
[  37]        :                                       
[  38]        :                                       
[  39]        :                                       
[  40]        :                                       
[  41]        :                                       
[  42]        :                                       
[  43]        :                                       
[  44]        :                                       
[  45]        :                                       
[  46]        :                                       ; multi-segment executable file template.
[  47]        :                                       
[  48]        :                                       DATA segment
[  49]        :                                       ; add your data here!
[  50]    0000: 3F 06 5B 4F 66 6D 7D 07 7F 6F         TABLE DB 3FH,06H,5BH,4FH,66H,6DH,7DH,07H,7FH,6FH;阴极显示
[  51]        :                                       
[  52]    000A: 00                                    HOUR DB 00H ;小时变量
[  53]    000B: 00                                    MINUTE DB 00H ;分钟变量
[  54]    000C: 00                                    SECOND DB 00H ;秒变量
[  55]    000D: 00                                    DAY DB 00H;天变量
[  56]    000E: 00 00 40                              HR DB 0,0,40H ;用于存放显示的变量
[  57]    0011: 00 00 40                              ME DB 0,0,40H
[  58]    0014: 00 00                                 SD DB 0,0
[  59]        :                                       DATA ends
[  60]        :                                       
[  61]        :                                       STACK segment PARA STACK 'STACK'
[  62]    0020: 00 00 00 00 00 00 00 00 00 00 00 00   dw   1024  dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00             
[  63]        :                                       STACK ends
[  64]        :                                       
[  65]        :                                       CODE segment
[  66]        :                                       ASSUME CS:CODE,DS:DATA
[  67]    0820:                                       start:
[  68]        :                                       ; set segment registers:
[  69]    0820: B8 00 00                              mov ax, data
[  70]    0823: 8E D8                                 mov ds, ax
[  71]    0825: B8 02 00                              MOV AX,STACK
[  72]    0828: 8E D0                                 MOV SS,AX;堆栈段设置
[  73]    082A: FA                                    CLI;关中断
[  74]        :                                       
[  75]        :                                       
[  76]    082B: B8 00 00 8E C0 BB 00 02 26 C7 07 8D   SET_INT 80H,INT_0
                00 26 C7 47 02 82 00                
[  77]    083E: B8 00 00 8E C0 BB 04 02 26 C7 07 19   SET_INT 81H,INT_1
                01 26 C7 47 02 82 00                
[  78]    0851: B8 00 00 8E C0 BB 08 02 26 C7 07 9A   SET_INT 82H,INT_2
                01 26 C7 47 02 82 00                
[  79]    0864: B8 00 00 8E C0 BB 0C 02 26 C7 07 A9   SET_INT 83H,INT_3
                01 26 C7 47 02 82 00                
[  80]    0877: B8 00 00 8E C0 BB 10 02 26 C7 07 B8   SET_INT 84H,INT_4
                01 26 C7 47 02 82 00                
[  81]        :                                       
[  82]        :                                       ;8259设置
[  83]        :                                       ;写ICW1  00010011B
[  84]    088A: B0 13                                 MOV AL,00010011B
[  85]    088C: E6 50                                 OUT 50H,AL ;送到偶地址
[  86]        :                                       ;写ICW2中断类型号高5位，这里设置中断类型号为80H和81H,IR0为中断
[  87]    088E: B0 80                                 MOV AL,10000000B
[  88]    0890: E6 52                                 OUT 52H,AL
[  89]        :                                       ;ICW3不用写
[  90]        :                                       ;写ICW4 00000001B，非特殊，非自动结束，非缓冲，8086工作方式
[  91]    0892: B0 01                                 MOV AL,00000001B
[  92]    0894: E6 52                                 OUT 52H,AL
[  93]        :                                       
[  94]        :                                       ;8259操作命令字管理
[  95]    0896: B0 E0                                 MOV AL,11100000B
[  96]    0898: E6 52                                 OUT 52H,AL;写OCW1字，开放IR0,IR1,IR2,IR3,IR4的中断
[  97]        :                                       
[  98]        :                                       
[  99]        :                                       
[ 100]        :                                       
[ 101]        :                                       
[ 102]        :                                       ;8255初始化
[ 103]    089A: B0 80                                 MOV AL,10000000B;方式字，设置A为方式0输出
[ 104]        :                                       ;输出，B口方式0输出。
[ 105]        :                                       ;方式C输入
[ 106]    089C: E6 4E                                 OUT 4EH,AL  ;  写入8255
[ 107]    089E: FB                                    STI ;开中断
[ 108]        :                                       
[ 109]        :                                       ;设置8253工作
[ 110]    089F: B0 16                                 MOV AL,00010110B    ;时钟频率200HZ 设置8253工作方式3 产生方波
[ 111]    08A1: E6 46                                 	OUT 46H,AL          ;  写入控制器
[ 112]    08A3: B0 72                                 MOV AL,72H               ;输入低8位计数值计数保证
[ 113]    08A5: E6 40                                 	OUT 40H,AL               ;写入对应寄存器
[ 114]        :                                       
[ 115]        :                                       
[ 116]    08A7: E8 3D 01                              AGAIN1:  CALL DISPLAY;显示
[ 117]    08AA: EB FB                                 JMP AGAIN1
[ 118]    08AC: 90                                    NOP
[ 119]        :                                       	   	
[ 120]        :                                       	
[ 121]        :                                       
[ 122]    08AD:                                       INT_0 PROC
[ 123]    08AD: FA                                    CLI
[ 124]    08AE: 50                                    PUSH AX
[ 125]    08AF: 53                                    PUSH BX
[ 126]        :                                       	
[ 127]        :                                       ;重置
[ 128]    08B0: C6 06 0C 00 00                        MOV SECOND,0
[ 129]    08B5: C6 06 0B 00 00                        MOV MINUTE,0
[ 130]    08BA: C6 06 0A 00 00                        MOV HOUR ,0
[ 131]        :                                       
[ 132]        :                                       
[ 133]    08BF: 33 DB 8B C3 A0 0C 00 3C 3C 75 09 FE   INT_PRO SECOND,60,MINUTE,SD
                06 0B 00 B0 00 A2 0C 00 B3 0A F6 F3 
                8A D8 8A 07 A2 14 00 8A DC 8A 07 A2 
                15 00                               
[ 134]    08E5: 33 DB 8B C3 A0 0B 00 3C 3C 75 09 FE   INT_PRO MINUTE,60,HOUR,ME
                06 0A 00 B0 00 A2 0B 00 B3 0A F6 F3 
                8A D8 8A 07 A2 11 00 8A DC 8A 07 A2 
                12 00                               
[ 135]    090B: 33 DB 8B C3 A0 0A 00 3C 18 75 09 FE   INT_PRO HOUR,24,DAY,HR
                06 0D 00 B0 00 A2 0A 00 B3 0A F6 F3 
                8A D8 8A 07 A2 0E 00 8A DC 8A 07 A2 
                0F 00                               
[ 136]        :                                       
[ 137]    0931: B0 20                                 MOV AL,00100000B
[ 138]    0933: E6 50                                 OUT 50H,AL;写OCW2字实现普通方式结束中断
[ 139]    0935: 5B                                    POP BX
[ 140]    0936: 58                                    POP AX
[ 141]    0937: FB                                    STI
[ 142]    0938: CF                                    IRET   ;中断服务程序
[ 143]        :                                       INT_0 ENDP
[ 144]        :                                       
[ 145]    0939:                                       INT_1 PROC
[ 146]    0939: FA                                    CLI
[ 147]    093A: 50                                    PUSH AX
[ 148]    093B: 53                                    PUSH BX 	
[ 149]    093C: FE 06 0C 00                           INC SECOND
[ 150]    0940: 33 DB 8B C3 A0 0C 00 3C 3C 75 09 FE   INT_PRO SECOND,60,MINUTE,SD
                06 0B 00 B0 00 A2 0C 00 B3 0A F6 F3 
                8A D8 8A 07 A2 14 00 8A DC 8A 07 A2 
                15 00                               
[ 151]    0966: 33 DB 8B C3 A0 0B 00 3C 3C 75 09 FE   INT_PRO MINUTE,60,HOUR,ME
                06 0A 00 B0 00 A2 0B 00 B3 0A F6 F3 
                8A D8 8A 07 A2 11 00 8A DC 8A 07 A2 
                12 00                               
[ 152]    098C: 33 DB 8B C3 A0 0A 00 3C 18 75 09 FE   INT_PRO HOUR,24,DAY,HR
                06 0D 00 B0 00 A2 0A 00 B3 0A F6 F3 
                8A D8 8A 07 A2 0E 00 8A DC 8A 07 A2 
                0F 00                               
[ 153]        :                                       
[ 154]    09B2: B0 20                                 MOV AL,00100000B
[ 155]    09B4: E6 50                                 OUT 50H,AL;写OCW2字实现普通方式结束中断
[ 156]        :                                       
[ 157]    09B6: 5B                                    POP BX
[ 158]    09B7: 58                                    POP AX
[ 159]    09B8: FB                                    STI
[ 160]    09B9: CF                                    IRET   ;中断服务程序
[ 161]        :                                       INT_1 ENDP
[ 162]        :                                       
[ 163]        :                                       
[ 164]    09BA:                                       INT_2 PROC
[ 165]    09BA: FA                                    CLI
[ 166]    09BB: 50                                    PUSH AX
[ 167]    09BC: 53                                    PUSH BX 	
[ 168]        :                                       
[ 169]    09BD: FE 06 0A 00                           INC HOUR
[ 170]        :                                       
[ 171]    09C1: B0 20                                 MOV AL,00100000B
[ 172]    09C3: E6 50                                 OUT 50H,AL;写OCW2字实现普通方式结束中断
[ 173]        :                                       
[ 174]    09C5: 5B                                    POP BX
[ 175]    09C6: 58                                    POP AX
[ 176]    09C7: FB                                    STI
[ 177]    09C8: CF                                    IRET   ;中断服务程序
[ 178]        :                                       INT_2 ENDP
[ 179]        :                                       
[ 180]        :                                       
[ 181]        :                                       
[ 182]    09C9:                                       INT_3 PROC
[ 183]    09C9: FA                                    CLI
[ 184]    09CA: 50                                    PUSH AX
[ 185]    09CB: 53                                    PUSH BX 	
[ 186]        :                                       
[ 187]    09CC: FE 06 0B 00                           INC MINUTE
[ 188]        :                                       
[ 189]    09D0: B0 20                                 MOV AL,00100000B
[ 190]    09D2: E6 50                                 OUT 50H,AL;写OCW2字实现普通方式结束中断
[ 191]        :                                       
[ 192]    09D4: 5B                                    POP BX
[ 193]    09D5: 58                                    POP AX
[ 194]    09D6: FB                                    STI
[ 195]    09D7: CF                                    IRET   ;中断服务程序
[ 196]        :                                       INT_3 ENDP
[ 197]        :                                       
[ 198]        :                                       
[ 199]    09D8:                                       INT_4 PROC
[ 200]    09D8: FA                                    CLI
[ 201]    09D9: 50                                    PUSH AX
[ 202]    09DA: 53                                    PUSH BX 	
[ 203]        :                                       
[ 204]    09DB: FE 06 0C 00                           INC SECOND
[ 205]        :                                       
[ 206]    09DF: B0 20                                 MOV AL,00100000B
[ 207]    09E1: E6 50                                 OUT 50H,AL;写OCW2字实现普通方式结束中断
[ 208]        :                                       
[ 209]    09E3: 5B                                    POP BX
[ 210]    09E4: 58                                    POP AX
[ 211]    09E5: FB                                    STI
[ 212]    09E6: CF                                    IRET   ;中断服务程序
[ 213]        :                                       INT_4 ENDP
[ 214]        :                                       
[ 215]        :                                       
[ 216]        :                                       
[ 217]        :                                       
[ 218]        :                                       
[ 219]        :                                       
[ 220]        :                                       
[ 221]        :                                       ;LED显示
[ 222]    09E7:                                       DISPLAY PROC NEAR
[ 223]        :                                       
[ 224]    09E7: BF 0E 00                              LEA DI,HR ;得到
[ 225]        :                                       
[ 226]        :                                       
[ 227]        :                                       
[ 228]        :                                       ;片选第一个数码管
[ 229]    09EA: B0 7F                                 MOV AL,01111111B
[ 230]    09EC: E6 4A                                 OUT 4AH,AL
[ 231]        :                                       
[ 232]        :                                       ;写入8255通道0
[ 233]    09EE: 8A 05                                 MOV AL,[DI]
[ 234]    09F0: E6 48                                 OUT 48H,AL
[ 235]    09F2: E8 55 00                              CALL DELAY
[ 236]    09F5: 47                                    INC DI
[ 237]        :                                       
[ 238]        :                                       
[ 239]        :                                       ;片选第2个数码管
[ 240]    09F6: B0 BF                                 MOV AL,10111111B
[ 241]    09F8: E6 4A                                 OUT 4AH,AL
[ 242]        :                                       
[ 243]        :                                       ;写入8255通道0
[ 244]    09FA: 8A 05                                 MOV AL,[DI]
[ 245]    09FC: E6 48                                 OUT 48H,AL
[ 246]    09FE: E8 49 00                              CALL DELAY
[ 247]    0A01: 47                                    INC DI
[ 248]        :                                       
[ 249]        :                                       
[ 250]        :                                       ;片选第3个数码管
[ 251]    0A02: B0 DF                                 MOV AL,11011111B
[ 252]    0A04: E6 4A                                 OUT 4AH,AL
[ 253]        :                                       ;写入8255通道0
[ 254]    0A06: 8A 05                                 MOV AL,[DI]
[ 255]    0A08: E6 48                                 OUT 48H,AL
[ 256]    0A0A: E8 3D 00                              CALL DELAY
[ 257]        :                                       
[ 258]    0A0D: 47                                    INC DI
[ 259]        :                                       
[ 260]        :                                       
[ 261]        :                                       ;片选第4个数码管
[ 262]    0A0E: B0 EF                                 MOV AL,11101111B
[ 263]    0A10: E6 4A                                 OUT 4AH,AL
[ 264]        :                                       ;写入8255通道0
[ 265]    0A12: 8A 05                                 MOV AL,[DI]
[ 266]    0A14: E6 48                                 OUT 48H,AL
[ 267]    0A16: E8 31 00                              CALL DELAY
[ 268]        :                                       
[ 269]    0A19: 47                                    INC DI
[ 270]        :                                       
[ 271]        :                                       ;片选第5个数码管
[ 272]    0A1A: B0 F7                                 MOV AL,11110111B
[ 273]    0A1C: E6 4A                                 OUT 4AH,AL
[ 274]        :                                       ;写入8255通道0
[ 275]    0A1E: 8A 05                                 MOV AL,[DI]
[ 276]    0A20: E6 48                                 OUT 48H,AL
[ 277]    0A22: E8 25 00                              CALL DELAY
[ 278]        :                                       
[ 279]    0A25: 47                                    INC DI
[ 280]        :                                       
[ 281]        :                                       ;片选第6个数码管
[ 282]    0A26: B0 FB                                 MOV AL,11111011B
[ 283]    0A28: E6 4A                                 OUT 4AH,AL
[ 284]        :                                       ;写入8255通道0
[ 285]    0A2A: 8A 05                                 MOV AL,[DI]
[ 286]    0A2C: E6 48                                 OUT 48H,AL
[ 287]    0A2E: E8 19 00                              CALL DELAY
[ 288]        :                                       
[ 289]    0A31: 47                                    INC DI
[ 290]        :                                       
[ 291]        :                                       ;片选第7个数码管
[ 292]    0A32: B0 FD                                 MOV AL,11111101B
[ 293]    0A34: E6 4A                                 OUT 4AH,AL
[ 294]        :                                       ;写入8255通道0
[ 295]    0A36: 8A 05                                 MOV AL,[DI]
[ 296]    0A38: E6 48                                 OUT 48H,AL
[ 297]    0A3A: E8 0D 00                              CALL DELAY
[ 298]        :                                       
[ 299]    0A3D: 47                                    INC DI
[ 300]        :                                       
[ 301]        :                                       ;片选第8个数码管
[ 302]    0A3E: B0 FE                                 MOV AL,11111110B
[ 303]    0A40: E6 4A                                 OUT 4AH,AL
[ 304]        :                                       ;写入8255通道0
[ 305]    0A42: 8A 05                                 MOV AL,[DI]
[ 306]    0A44: E6 48                                 OUT 48H,AL
[ 307]    0A46: E8 01 00                              CALL DELAY
[ 308]        :                                       
[ 309]        :                                       
[ 310]        :                                       
[ 311]        :                                       
[ 312]        :                                       
[ 313]    0A49: C3                                    RET
[ 314]        :                                       DISPLAY ENDP
[ 315]        :                                       
[ 316]        :                                       ;延时子程序
[ 317]    0A4A:                                       DELAY PROC NEAR
[ 318]    0A4A: 51                                    PUSH CX
[ 319]    0A4B: B9 50 00                              MOV CX,80
[ 320]    0A4E: E2 FE                                 AGAIN3:LOOP AGAIN3
[ 321]    0A50: 59                                    POP CX
[ 322]    0A51: C3                                    RET
[ 323]        :                                       DELAY ENDP    	     	
[ 324]        :                                       ; add your code here
[ 325]    0A52: B8 00 4C                              mov ax, 4c00h ; exit to operating system.
[ 326]    0A55: CD 21                                 int 21h
[ 327]        :                                       ends
[ 328]        :                                       end start ; set entry point and stop the assembler.
[ 329]        :                                       
[ 330]        :                                       
 
===================================================================================================
 
EXE HEADER - bytes from 0000 to 01FF inclusive.

0000: 4D      -   exe signature (M)
0001: 5A      -   exe signature (Z)
0002: 57      -   bytes on last page (l.byte)
0003: 00      -   bytes on last page (h.byte)
0004: 07      -   512 byte pages in file (l.byte)
0005: 00      -   512 byte pages in file (h.byte)
0006: 07      -   relocations (l.byte)
0007: 00      -   relocations (h.byte)
0008: 20      -   paragraphs in header (l.byte)
0009: 00      -   paragraphs in header (h.byte)
000A: 00      -   minimum memory (l.byte)
000B: 00      -   minimum memory (h.byte)
000C: FF      -   maximum memory (l.byte)
000D: FF      -   maximum memory (h.byte)
000E: 02      -   SS - stack segment (l.byte)
000F: 00      -   SS - stack segment (h.byte)
0010: 00      -   SP - stack pointer (l.byte)
0011: 08      -   SP - stack pointer (h.byte)
0012: 6D      -   check sum (l.byte)
0013: 95      -   check sum (h.byte)
0014: 00      -   IP - instruction pointer (l.byte)
0015: 00      -   IP - instruction pointer (h.byte)
0016: 82      -   CS - code segment (l.byte)
0017: 00      -   CS - code segment (h.byte)
0018: 1E      -   relocation table adress (l.byte)
0019: 00      -   relocation table adress (h.byte)
001A: 00      -   overlay number (l.byte)
001B: 00      -   overlay number (h.byte)
001C: 01      -   signature (l.byte)
001D: 00      -   signature (h.byte)
001E: 01      -   relocation table - offset inside segment (l.byte)
001F: 00      -   relocation table - offset inside segment (h.byte)
0020: 82      -   relocation table - segment anchor (l.byte)
0021: 00      -   relocation table - segment anchor (h.byte)
0022: 06      -   relocation table - offset inside segment (l.byte)
0023: 00      -   relocation table - offset inside segment (h.byte)
0024: 82      -   relocation table - segment anchor (l.byte)
0025: 00      -   relocation table - segment anchor (h.byte)
0026: 1C      -   relocation table - offset inside segment (l.byte)
0027: 00      -   relocation table - offset inside segment (h.byte)
0028: 82      -   relocation table - segment anchor (l.byte)
0029: 00      -   relocation table - segment anchor (h.byte)
002A: 2F      -   relocation table - offset inside segment (l.byte)
002B: 00      -   relocation table - offset inside segment (h.byte)
002C: 82      -   relocation table - segment anchor (l.byte)
002D: 00      -   relocation table - segment anchor (h.byte)
002E: 42      -   relocation table - offset inside segment (l.byte)
002F: 00      -   relocation table - offset inside segment (h.byte)
0030: 82      -   relocation table - segment anchor (l.byte)
0031: 00      -   relocation table - segment anchor (h.byte)
0032: 55      -   relocation table - offset inside segment (l.byte)
0033: 00      -   relocation table - offset inside segment (h.byte)
0034: 82      -   relocation table - segment anchor (l.byte)
0035: 00      -   relocation table - segment anchor (h.byte)
0036: 68      -   relocation table - offset inside segment (l.byte)
0037: 00      -   relocation table - offset inside segment (h.byte)
0038: 82      -   relocation table - segment anchor (l.byte)
0039: 00      -   relocation table - segment anchor (h.byte)
003A to 01FF  -   reserved relocation area  (00) 




===================================================================================================
